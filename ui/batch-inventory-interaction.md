# 批量库存录入功能交互说明

## 功能概述

批量库存录入功能旨在帮助酒吧管理员快速录入多个商品的库存信息，特别是在初始设置或大量商品进货时，提高工作效率。该功能提供三种不同的录入方式：Excel表格导入、商品条码扫描和手动录入。

## 交互流程

### 1. 进入批量录入页面

用户可以从以下入口进入批量录入页面：

- 库存管理页面的"批量入库"按钮
- 首页金刚区的"库存管理"入口，然后点击批量入库

### 2. 批量导入方式

#### 2.1 Excel表格导入

**交互流程：**

1. 用户点击"导入Excel表格"按钮
2. 系统打开文件选择器，用户选择要导入的Excel文件
3. 系统验证文件格式和大小（支持.xlsx、.xls、.csv格式，不超过5MB）
4. 系统解析Excel文件，将数据显示在手动录入表格中
5. 用户可以修改导入的数据
6. 用户点击"批量入库"按钮提交数据

**特殊交互：**

- 用户可以点击"下载模板"链接下载标准格式的Excel模板
- 如果导入的Excel格式不正确，系统会提示错误并指导用户按照模板格式修改

#### 2.2 商品条码扫描

**交互流程：**

1. 用户点击扫描区域的相机图标
2. 系统打开相机进行扫描
3. 扫描成功后，系统自动识别商品并添加到表格中
4. 默认数量为1，用户可以修改数量和开封状态
5. 用户可以继续扫描添加更多商品
6. 完成后点击"批量入库"按钮提交数据

**特殊交互：**

- 如果扫描的条码未在系统中注册，系统会提示"未找到商品信息"
- 连续扫描同一商品时，系统会自动增加该商品的数量，而不是添加新行

#### 2.3 手动录入

**交互流程：**

1. 用户点击商品输入框，系统弹出商品选择弹窗
2. 用户在弹窗中选择商品，点击确定
3. 用户调整数量（使用+/-按钮或直接输入）
4. 用户选择商品状态（未开封/已开封）
5. 用户可以通过"添加商品"按钮添加更多商品行
6. 用户可以点击"×"按钮删除不需要的商品行
7. 完成后点击"批量入库"按钮提交数据

**特殊交互：**

- 用户可以通过表格行左侧的复选框选择/取消选择特定商品
- 底部按钮会显示当前选中的商品数量："批量入库（X件商品）"

### 3. 提交数据

**交互流程：**

1. 用户点击"批量入库"按钮
2. 系统验证所有输入数据的有效性
3. 如果验证通过，系统显示确认弹窗，汇总所有要录入的商品信息
4. 用户确认后，系统提交数据
5. 提交成功后，系统显示成功提示，并返回库存管理页面
6. 库存管理页面刷新，显示更新后的库存数据

**特殊交互：**

- 如果数据验证失败（如商品未选择、数量为0等），系统会标记错误字段并提示用户修改
- 提交过程中显示加载状态，防止重复提交

## 页面元素说明

### 导航栏

- 返回按钮：点击返回上一页面
- 页面标题：显示"批量录入库存"

### 批量导入区域

- 导入Excel按钮：点击打开文件选择器
- 模板下载链接：点击下载Excel导入模板
- 文件格式提示：显示支持的文件格式和大小限制

### 扫码录入区域

- 相机图标：点击打开相机扫描
- 提示文本：指导用户如何使用扫码功能

### 手动录入表格

- 表头：显示商品、数量、类型等字段
- 商品选择：点击打开商品选择弹窗
- 数量调整：使用+/-按钮或直接输入修改数量
- 类型选择：下拉选择未开封/已开封
- 删除按钮：点击删除当前行
- 添加商品：点击添加新的空白行

### 底部按钮

- 批量入库按钮：显示选中商品数量，点击提交数据

### 商品选择弹窗

- 商品列表：显示可选商品的图片、名称和价格
- 取消按钮：关闭弹窗不选择商品
- 确定按钮：确认选择并关闭弹窗

## 响应式设计考虑

- 页面适配各种屏幕尺寸的移动设备
- 在较小屏幕上，表格布局会自动调整，确保所有元素可见
- 弹窗大小根据屏幕尺寸自动调整
- 手指触控友好的按钮大小和间距

## 异常处理

1. **网络异常**：

   - 如果提交数据时网络异常，系统会保存当前输入，并提示用户重试
   - 用户可以在网络恢复后继续提交
2. **数据校验**：

   - 商品必须选择
   - 数量必须大于0
   - 类型必须选择
3. **并发控制**：

   - 防止重复提交：提交按钮在处理过程中会被禁用
   - 如果其他用户同时修改了同一商品的库存，系统会提示并更新数据
